<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>PANDI Downloader</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#cfead6,#6fbf9b);
  font-family:Arial,Helvetica,sans-serif;
  color:#0f2f23;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  width:95%;
  max-width:420px;
  background:#f3fbf6;
  padding:22px;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
}
h1{
  text-align:center;
  margin:0 0 16px;
  font-size:22px;
}
input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:2px solid #b7dfc6;
  font-size:15px;
  outline:none;
}
input:focus{
  border-color:#4caf7a;
}
button{
  width:100%;
  margin-top:14px;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  background:linear-gradient(135deg,#4caf7a,#2f8f64);
  color:#fff;
}
button:active{transform:scale(.98)}
.status{
  margin-top:10px;
  text-align:center;
  font-size:13px;
  color:#2f6b50;
}
iframe{
  width:100%;
  border:none;
  border-radius:14px;
  margin-top:14px;
  background:#fff;
}
.fallback{
  display:none;
  text-align:center;
  margin-top:14px;
}
.fallback a{
  display:inline-block;
  padding:12px 18px;
  background:#4caf7a;
  color:#fff;
  text-decoration:none;
  border-radius:10px;
  font-weight:bold;
}
footer{
  margin-top:12px;
  text-align:center;
  font-size:11px;
  opacity:.6;
}
</style>
</head>

<body>

<div class="card">
  <h1>üçµ PANDI Downloader</h1>

  <input id="url" placeholder="Tempel link FB / TikTok / YouTube">

  <button onclick="process()">DOWNLOAD</button>

  <div class="status" id="status">Siap digunakan</div>

  <div id="result"></div>

  <div class="fallback" id="fallback">
    <a id="fallbackLink" target="_blank">BUKA HALAMAN DOWNLOAD</a>
    <p style="font-size:12px;opacity:.7;margin-top:6px">
      Jika tidak muncul, klik tombol di atas
    </p>
  </div>

  <footer>GitHub Pages ‚Ä¢ Matcha Theme</footer>
</div>

<script>
function detect(url){
  if(/tiktok\.com|vt\.tiktok\.com/i.test(url)) return "tt";
  if(/youtube\.com|youtu\.be/i.test(url)) return "yt";
  if(/facebook\.com|fb\.watch/i.test(url)) return "fb";
  return null;
}

function process(){
  const url=document.getElementById("url").value.trim();
  if(!url) return alert("Masukkan link dulu!");

  const type=detect(url);
  if(!type) return alert("Link tidak dikenali!");

  const result=document.getElementById("result");
  const status=document.getElementById("status");
  const fallback=document.getElementById("fallback");
  const fallbackLink=document.getElementById("fallbackLink");

  result.innerHTML="";
  fallback.style.display="none";
  status.innerText="Menyiapkan download...";

  let iframeUrl="";

  if(type==="tt"){
    iframeUrl="https://tikwm.com/?url="+encodeURIComponent(url);
  }

  if(type==="yt"){
    iframeUrl="https://api.vevioz.com/api/button/mp3/"+encodeURIComponent(url);
  }

  if(type==="fb"){
    iframeUrl="https://fdownloader.net/";
  }

  fallbackLink.href=iframeUrl;

  result.innerHTML=`
    <iframe id="dlframe" src="${iframeUrl}" height="420"></iframe>
  `;

  // FIX iframe diblok
  setTimeout(()=>{
    try{
      const frame=document.getElementById("dlframe");
      if(!frame || frame.contentWindow.length===0){
        fallback.style.display="block";
        status.innerText="Download diblok iframe ‚Äî gunakan tombol di bawah";
      }else{
        status.innerText="Siap diunduh ‚Üì";
      }
    }catch(e){
      fallback.style.display="block";
      status.innerText="Download diblok iframe ‚Äî gunakan tombol di bawah";
    }
  },2500);
}
</script>

</body>
</html>
